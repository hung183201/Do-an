
<div class="modal-header">
    <span class="modal-title" ><strong>Gán Tiện Ích</strong></span>
    <button type="button" class="close" aria-label="Close" (click)="activeModal.dismiss('Cross click')"><span
            aria-hidden="true">&times;</span></button>
</div>

<div class="modal-body">
    <div class="row" [class.element-invisible]="!hasViewRights">
        <div class="col-sm-5">
            <span>
                <h6><u><strong>Tiện ích không thuộc nhóm</strong></u></h6>
            </span>
            
            <mat-form-field style="width:100%">
                <input id='txtSearchActionsNotInGroup'
                    [disabled]="!hasViewRights ? 'disabled': null"
                    matInput placeholder='Tìm kiếm.....(Nhập tên, url)' (input)="onSearchChange($event.target.value, 0)" />
            </mat-form-field>
        </div>
        <div class="col-sm-1" style="text-align:center;">
        </div>
        <div class="col-sm-5">
            <span>
                <h6>
                    <strong>Tiện ích thuộc nhóm</strong>
                </h6>
            </span>
            <mat-form-field style="width:100%">
                <input id='txtSearchActionsInGroup'
                    [disabled]="!hasViewRights ? 'disabled': null"
                    matInput placeholder='Tìm kiếm.....(Nhập tên, url)' (input)="onSearchChange($event.target.value, 1)" />
            </mat-form-field>
        </div>
    </div>
    <div class="row" [class.element-invisible]="!hasViewRights">
        <div class="col-sm-5">
            <div class="mat-container mat-elevation-z8">
                <table mat-table [dataSource]="actionsNotInGroup">
                    <!-- Position Column -->
                    <ng-container matColumnDef="STT">
                        <th mat-header-cell *matHeaderCellDef> STT </th>
                        <td mat-cell *matCellDef="let i = index;"
                            style="align-items: center">
                            {{i + 1 + (paginatorNotInGroup.pageIndex * paginatorNotInGroup.pageSize)}}
                        </td>
                    </ng-container>
                    <!-- Action Name -->
                    <ng-container matColumnDef="Detail">
                        <th mat-header-cell *matHeaderCellDef> Chức năng </th>
                        <td mat-cell *matCellDef="let element">
                            <div>{{element.nameUtilities}}</div>
                            <!-- <div>{{element.url}}</div> -->
                        </td>
                    </ng-container>
                    <!-- Checkbox Column -->
                    <ng-container matColumnDef="Select">
                        <th mat-header-cell *matHeaderCellDef style="text-align: right">
                            <mat-checkbox [(ngModel)]="checkedAllNotInGroup"
                                        [class.element-invisible]="!hasAssignActionRights"
                                        [disabled]="!hasAssignActionRights ? 'disabled': null"
                                        (change)="$event ? masterToggle(0) : null"
                                        [checked]="selectionNotInGroup.hasValue() && isAllSelected(0)"
                                        [indeterminate]="selectionNotInGroup.hasValue() && !isAllSelected(0)"
                                        [aria-label]="checkboxLabel(0)">
                            </mat-checkbox>
                        </th>
                        <td mat-cell *matCellDef="let row" style="text-align: right">
                            <mat-checkbox (click)="$event.stopPropagation()"
                                        [class.element-invisible]="!hasAssignActionRights"
                                        [disabled]="!hasAssignActionRights ? 'disabled': null"
                                        (change)="$event ? selectionNotInGroup.toggle(row) : null"
                                        [checked]="selectionNotInGroup.isSelected(row)"
                                        [aria-label]="checkboxLabel(0, row)">
                            </mat-checkbox>
                        </td>
                    </ng-container>
                    <tr mat-header-row *matHeaderRowDef="displayedColumns;sticky: true;"></tr>
                    <tr mat-row *matRowDef="let row; columns: displayedColumns;"
                        (click)="selectionNotInGroup.toggle(row)">
                    </tr>
                </table>
                <mat-paginator #paginatorNotInGroup [pageSizeOptions]="pageSizeOptions"
                            [pageSize]="10" [hidePageSize]="true" 
                            showFirstLastButtons></mat-paginator>
            </div>
        </div>
        <div class="col-sm-1" style="text-align:center;">
            <br />
            <button class="glyphicon-arrow-right" style="width:40px"
                    [class.element-invisible]="!hasAssignActionRights"
                    [disabled]="!hasAssignActionRights ? 'disabled': null"
                    (click)="moveSelected('right')">
                &rsaquo;
            </button><br />
            <button class="glyphicon-circle-arrow-right" style="width:40px"
                    [class.element-invisible]="!hasAssignActionRights"
                    [disabled]="!hasAssignActionRights ? 'disabled': null"
                    (click)="moveAll('right')">
                &raquo;
            </button><br />
            <button class="glyphicon-arrow-left" style="width:40px"
                    [class.element-invisible]="!hasAssignActionRights"
                    [disabled]="!hasAssignActionRights ? 'disabled': null"
                    (click)="moveSelected('left')">
                &lsaquo;
            </button><br />
            <button class="glyphicon-circle-arrow-left" style="width:40px"
                    [class.element-invisible]="!hasAssignActionRights"
                    [disabled]="!hasAssignActionRights ? 'disabled': null"
                    (click)="moveAll('left')">
                &laquo;
            </button>
        </div>
        <div class="col-sm-5">
            <div class="mat-container mat-elevation-z8">
                <table mat-table [dataSource]="actionsInGroup">

                    <!-- Position Column -->
                    <ng-container matColumnDef="STT">
                        <th mat-header-cell *matHeaderCellDef> STT </th>
                        <td mat-cell *matCellDef="let i = index;"> {{i + 1 + (paginatorInGroup.pageIndex * paginatorInGroup.pageSize)}} </td>
                    </ng-container>
                    <!-- Action Name -->
                    <ng-container matColumnDef="Detail">
                        <th mat-header-cell *matHeaderCellDef> Chức năng </th>
                        <td mat-cell *matCellDef="let element">
                            <div>{{element.nameUtilities}}</div>
                            <!-- <div>{{element.url}}</div> -->
                        </td>
                    </ng-container>
                    <!-- Checkbox Column -->
                    <ng-container matColumnDef="Select">
                        <th mat-header-cell *matHeaderCellDef>
                            <mat-checkbox [(ngModel)]="checkedAllInGroup"
                                        [class.element-invisible]="!hasAssignActionRights"
                                        [disabled]="!hasAssignActionRights ? 'disabled': null"
                                        (change)="$event ? masterToggle(1) : null"
                                        [checked]="selectionInGroup.hasValue() && isAllSelected(1)"
                                        [indeterminate]="selectionInGroup.hasValue() && !isAllSelected(1)"
                                        [aria-label]="checkboxLabel(1)">
                            </mat-checkbox>
                        </th>
                        <td mat-cell *matCellDef="let row">
                            <mat-checkbox (click)="$event.stopPropagation()"
                                        [class.element-invisible]="!hasAssignActionRights"
                                        [disabled]="!hasAssignActionRights ? 'disabled': null"
                                        (change)="$event ? selectionInGroup.toggle(row) : null"
                                        [checked]="selectionInGroup.isSelected(row)"
                                        [aria-label]="checkboxLabel(1, row)">
                            </mat-checkbox>
                        </td>
                    </ng-container>

                    <tr mat-header-row *matHeaderRowDef="displayedColumns;sticky: true;"></tr>
                    <tr mat-row *matRowDef="let row; columns: displayedColumns;"
                        (click)="selectionInGroup.toggle(row)">
                    </tr>
                </table>
                <mat-paginator #paginatorInGroup [pageSizeOptions]="pageSizeOptions"
                            [pageSize]="10" [hidePageSize]="true"
                            showFirstLastButtons></mat-paginator>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-12">
            <label #lblThongBao id="lblThongBao" style="color:red"></label>
        </div>
    </div>   
</div>
